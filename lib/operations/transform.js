"use strict";

var necessary = require("necessary");

var arrayUtilities = necessary.arrayUtilities,
    first = arrayUtilities.first,
    tail = arrayUtilities.tail;

function transformOperations(tau, rho) {
  if (tau.length === 0 || rho.length === 0) {
    return tau;
  }

  var tau1 = [first(tau)],
      tau2 = tail(tau),
      rho1 = [first(rho)],
      rho2 = tail(rho);

  if (tau.length > 1 && rho.length > 1) {
    return transformOperations(transformOperations(tau1, rho1), rho2).concat(transformOperations(transformOperations(tau2, transformOperations(rho1, tau1)), transformOperations(rho2, transformOperations(tau1, rho1))));
  } else if (tau.length > 1 && rho.length === 1) {
    return transformOperations(tau1, rho).concat(transformOperations(tau2, transformOperations(rho, tau1)));
  } else if (tau.length === 1 && rho.length > 1) {
    return transformOperations(transformOperations(tau, rho1), rho2);
  } else {
    tau = first(tau); ///

    rho = first(rho); ///

    return rho.transformOperation(tau);
  }
}

;
module.exports = transformOperations;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYW5zZm9ybS5qcyJdLCJuYW1lcyI6WyJuZWNlc3NhcnkiLCJyZXF1aXJlIiwiYXJyYXlVdGlsaXRpZXMiLCJmaXJzdCIsInRhaWwiLCJ0cmFuc2Zvcm1PcGVyYXRpb25zIiwidGF1IiwicmhvIiwibGVuZ3RoIiwidGF1MSIsInRhdTIiLCJyaG8xIiwicmhvMiIsImNvbmNhdCIsInRyYW5zZm9ybU9wZXJhdGlvbiIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLFNBQVMsR0FBR0MsT0FBTyxDQUFDLFdBQUQsQ0FBekI7O0FBRU0sSUFBRUMsY0FBRixHQUFxQkYsU0FBckIsQ0FBRUUsY0FBRjtBQUFBLElBQ0VDLEtBREYsR0FDa0JELGNBRGxCLENBQ0VDLEtBREY7QUFBQSxJQUNTQyxJQURULEdBQ2tCRixjQURsQixDQUNTRSxJQURUOztBQUdOLFNBQVNDLG1CQUFULENBQTZCQyxHQUE3QixFQUFrQ0MsR0FBbEMsRUFBdUM7QUFDckMsTUFBS0QsR0FBRyxDQUFDRSxNQUFKLEtBQWUsQ0FBaEIsSUFBdUJELEdBQUcsQ0FBQ0MsTUFBSixLQUFlLENBQTFDLEVBQThDO0FBQzVDLFdBQU9GLEdBQVA7QUFDRDs7QUFFRCxNQUFNRyxJQUFJLEdBQUcsQ0FBQ04sS0FBSyxDQUFDRyxHQUFELENBQU4sQ0FBYjtBQUFBLE1BQ01JLElBQUksR0FBR04sSUFBSSxDQUFDRSxHQUFELENBRGpCO0FBQUEsTUFFTUssSUFBSSxHQUFHLENBQUNSLEtBQUssQ0FBQ0ksR0FBRCxDQUFOLENBRmI7QUFBQSxNQUdNSyxJQUFJLEdBQUdSLElBQUksQ0FBQ0csR0FBRCxDQUhqQjs7QUFLQSxNQUFJRCxHQUFHLENBQUNFLE1BQUosR0FBYSxDQUFiLElBQWtCRCxHQUFHLENBQUNDLE1BQUosR0FBYSxDQUFuQyxFQUFzQztBQUNwQyxXQUNFSCxtQkFBbUIsQ0FDakJBLG1CQUFtQixDQUFDSSxJQUFELEVBQU9FLElBQVAsQ0FERixFQUVqQkMsSUFGaUIsQ0FBbkIsQ0FHRUMsTUFIRixDQUlFUixtQkFBbUIsQ0FDakJBLG1CQUFtQixDQUNqQkssSUFEaUIsRUFFakJMLG1CQUFtQixDQUFDTSxJQUFELEVBQU9GLElBQVAsQ0FGRixDQURGLEVBS2pCSixtQkFBbUIsQ0FDakJPLElBRGlCLEVBRWpCUCxtQkFBbUIsQ0FBQ0ksSUFBRCxFQUFPRSxJQUFQLENBRkYsQ0FMRixDQUpyQixDQURGO0FBaUJELEdBbEJELE1Ba0JPLElBQUtMLEdBQUcsQ0FBQ0UsTUFBSixHQUFhLENBQWQsSUFBcUJELEdBQUcsQ0FBQ0MsTUFBSixLQUFlLENBQXhDLEVBQTRDO0FBQ2pELFdBQ0VILG1CQUFtQixDQUFDSSxJQUFELEVBQU9GLEdBQVAsQ0FBbkIsQ0FBK0JNLE1BQS9CLENBQ0VSLG1CQUFtQixDQUNqQkssSUFEaUIsRUFFakJMLG1CQUFtQixDQUFDRSxHQUFELEVBQU1FLElBQU4sQ0FGRixDQURyQixDQURGO0FBUUQsR0FUTSxNQVNBLElBQUtILEdBQUcsQ0FBQ0UsTUFBSixLQUFlLENBQWhCLElBQXVCRCxHQUFHLENBQUNDLE1BQUosR0FBYSxDQUF4QyxFQUE0QztBQUNqRCxXQUNFSCxtQkFBbUIsQ0FDakJBLG1CQUFtQixDQUFDQyxHQUFELEVBQU1LLElBQU4sQ0FERixFQUVqQkMsSUFGaUIsQ0FEckI7QUFNRCxHQVBNLE1BT0E7QUFDTE4sSUFBQUEsR0FBRyxHQUFHSCxLQUFLLENBQUNHLEdBQUQsQ0FBWCxDQURLLENBQ2E7O0FBQ2xCQyxJQUFBQSxHQUFHLEdBQUdKLEtBQUssQ0FBQ0ksR0FBRCxDQUFYLENBRkssQ0FFYTs7QUFFbEIsV0FBT0EsR0FBRyxDQUFDTyxrQkFBSixDQUF1QlIsR0FBdkIsQ0FBUDtBQUNEO0FBQ0Y7O0FBQUE7QUFFRFMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCWCxtQkFBakIiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuXHJcbmNvbnN0IG5lY2Vzc2FyeSA9IHJlcXVpcmUoXCJuZWNlc3NhcnlcIik7XHJcblxyXG5jb25zdCB7IGFycmF5VXRpbGl0aWVzIH0gPSBuZWNlc3NhcnksXHJcbiAgICAgIHsgZmlyc3QsIHRhaWwgfSA9IGFycmF5VXRpbGl0aWVzO1xyXG5cclxuZnVuY3Rpb24gdHJhbnNmb3JtT3BlcmF0aW9ucyh0YXUsIHJobykge1xyXG4gIGlmICgodGF1Lmxlbmd0aCA9PT0gMCkgfHwgKHJoby5sZW5ndGggPT09IDApKSB7XHJcbiAgICByZXR1cm4gdGF1O1xyXG4gIH1cclxuXHJcbiAgY29uc3QgdGF1MSA9IFtmaXJzdCh0YXUpXSxcclxuICAgICAgICB0YXUyID0gdGFpbCh0YXUpLFxyXG4gICAgICAgIHJobzEgPSBbZmlyc3QocmhvKV0sXHJcbiAgICAgICAgcmhvMiA9IHRhaWwocmhvKTtcclxuXHJcbiAgaWYgKHRhdS5sZW5ndGggPiAxICYmIHJoby5sZW5ndGggPiAxKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICB0cmFuc2Zvcm1PcGVyYXRpb25zKFxyXG4gICAgICAgIHRyYW5zZm9ybU9wZXJhdGlvbnModGF1MSwgcmhvMSksXHJcbiAgICAgICAgcmhvMlxyXG4gICAgICApLmNvbmNhdChcclxuICAgICAgICB0cmFuc2Zvcm1PcGVyYXRpb25zKFxyXG4gICAgICAgICAgdHJhbnNmb3JtT3BlcmF0aW9ucyhcclxuICAgICAgICAgICAgdGF1MixcclxuICAgICAgICAgICAgdHJhbnNmb3JtT3BlcmF0aW9ucyhyaG8xLCB0YXUxKVxyXG4gICAgICAgICAgKSxcclxuICAgICAgICAgIHRyYW5zZm9ybU9wZXJhdGlvbnMoXHJcbiAgICAgICAgICAgIHJobzIsXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybU9wZXJhdGlvbnModGF1MSwgcmhvMSlcclxuICAgICAgICAgIClcclxuICAgICAgICApXHJcbiAgICAgIClcclxuICAgICk7XHJcbiAgfSBlbHNlIGlmICgodGF1Lmxlbmd0aCA+IDEpICYmIChyaG8ubGVuZ3RoID09PSAxKSkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgdHJhbnNmb3JtT3BlcmF0aW9ucyh0YXUxLCByaG8pLmNvbmNhdChcclxuICAgICAgICB0cmFuc2Zvcm1PcGVyYXRpb25zKFxyXG4gICAgICAgICAgdGF1MixcclxuICAgICAgICAgIHRyYW5zZm9ybU9wZXJhdGlvbnMocmhvLCB0YXUxKVxyXG4gICAgICAgIClcclxuICAgICAgKVxyXG4gICAgKTtcclxuICB9IGVsc2UgaWYgKCh0YXUubGVuZ3RoID09PSAxKSAmJiAocmhvLmxlbmd0aCA+IDEpKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICB0cmFuc2Zvcm1PcGVyYXRpb25zKFxyXG4gICAgICAgIHRyYW5zZm9ybU9wZXJhdGlvbnModGF1LCByaG8xKSxcclxuICAgICAgICByaG8yXHJcbiAgICAgIClcclxuICAgICk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRhdSA9IGZpcnN0KHRhdSk7IC8vL1xyXG4gICAgcmhvID0gZmlyc3QocmhvKTsgLy8vXHJcblxyXG4gICAgcmV0dXJuIHJoby50cmFuc2Zvcm1PcGVyYXRpb24odGF1KTtcclxuICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHRyYW5zZm9ybU9wZXJhdGlvbnM7XHJcbiJdfQ==