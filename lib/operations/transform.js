'use strict';

var necessary = require('necessary');

var arrayUtilities = necessary.arrayUtilities,
    first = arrayUtilities.first,
    tail = arrayUtilities.tail;


function transformOperations(tau, rho) {
  if (tau.length === 0 || rho.length === 0) {
    return tau;
  }

  var tau1 = [first(tau)],
      tau2 = tail(tau),
      rho1 = [first(rho)],
      rho2 = tail(rho);

  if (tau.length > 1 && rho.length > 1) {
    return transformOperations(transformOperations(tau1, rho1), rho2).concat(transformOperations(transformOperations(tau2, transformOperations(rho1, tau1)), transformOperations(rho2, transformOperations(tau1, rho1))));
  } else if (tau.length > 1 && rho.length === 1) {
    return transformOperations(tau1, rho).concat(transformOperations(tau2, transformOperations(rho, tau1)));
  } else if (tau.length === 1 && rho.length > 1) {
    return transformOperations(transformOperations(tau, rho1), rho2);
  } else {
    tau = first(tau); ///
    rho = first(rho); ///

    return rho.transformOperation(tau);
  }
};

module.exports = transformOperations;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi9vcGVyYXRpb25zL3RyYW5zZm9ybS5qcyJdLCJuYW1lcyI6WyJuZWNlc3NhcnkiLCJyZXF1aXJlIiwiYXJyYXlVdGlsaXRpZXMiLCJmaXJzdCIsInRhaWwiLCJ0cmFuc2Zvcm1PcGVyYXRpb25zIiwidGF1IiwicmhvIiwibGVuZ3RoIiwidGF1MSIsInRhdTIiLCJyaG8xIiwicmhvMiIsImNvbmNhdCIsInRyYW5zZm9ybU9wZXJhdGlvbiIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLFlBQVlDLFFBQVEsV0FBUixDQUFsQjs7QUFFTSxJQUFFQyxjQUFGLEdBQXFCRixTQUFyQixDQUFFRSxjQUFGO0FBQUEsSUFDRUMsS0FERixHQUNrQkQsY0FEbEIsQ0FDRUMsS0FERjtBQUFBLElBQ1NDLElBRFQsR0FDa0JGLGNBRGxCLENBQ1NFLElBRFQ7OztBQUdOLFNBQVNDLG1CQUFULENBQTZCQyxHQUE3QixFQUFrQ0MsR0FBbEMsRUFBdUM7QUFDckMsTUFBS0QsSUFBSUUsTUFBSixLQUFlLENBQWhCLElBQXVCRCxJQUFJQyxNQUFKLEtBQWUsQ0FBMUMsRUFBOEM7QUFDNUMsV0FBT0YsR0FBUDtBQUNEOztBQUVELE1BQU1HLE9BQU8sQ0FBQ04sTUFBTUcsR0FBTixDQUFELENBQWI7QUFBQSxNQUNNSSxPQUFPTixLQUFLRSxHQUFMLENBRGI7QUFBQSxNQUVNSyxPQUFPLENBQUNSLE1BQU1JLEdBQU4sQ0FBRCxDQUZiO0FBQUEsTUFHTUssT0FBT1IsS0FBS0csR0FBTCxDQUhiOztBQUtBLE1BQUlELElBQUlFLE1BQUosR0FBYSxDQUFiLElBQWtCRCxJQUFJQyxNQUFKLEdBQWEsQ0FBbkMsRUFBc0M7QUFDcEMsV0FDRUgsb0JBQ0VBLG9CQUFvQkksSUFBcEIsRUFBMEJFLElBQTFCLENBREYsRUFFRUMsSUFGRixFQUdFQyxNQUhGLENBSUVSLG9CQUNFQSxvQkFDRUssSUFERixFQUVFTCxvQkFBb0JNLElBQXBCLEVBQTBCRixJQUExQixDQUZGLENBREYsRUFLRUosb0JBQ0VPLElBREYsRUFFRVAsb0JBQW9CSSxJQUFwQixFQUEwQkUsSUFBMUIsQ0FGRixDQUxGLENBSkYsQ0FERjtBQWlCRCxHQWxCRCxNQWtCTyxJQUFLTCxJQUFJRSxNQUFKLEdBQWEsQ0FBZCxJQUFxQkQsSUFBSUMsTUFBSixLQUFlLENBQXhDLEVBQTRDO0FBQ2pELFdBQ0VILG9CQUFvQkksSUFBcEIsRUFBMEJGLEdBQTFCLEVBQStCTSxNQUEvQixDQUNFUixvQkFDRUssSUFERixFQUVFTCxvQkFBb0JFLEdBQXBCLEVBQXlCRSxJQUF6QixDQUZGLENBREYsQ0FERjtBQVFELEdBVE0sTUFTQSxJQUFLSCxJQUFJRSxNQUFKLEtBQWUsQ0FBaEIsSUFBdUJELElBQUlDLE1BQUosR0FBYSxDQUF4QyxFQUE0QztBQUNqRCxXQUNFSCxvQkFDRUEsb0JBQW9CQyxHQUFwQixFQUF5QkssSUFBekIsQ0FERixFQUVFQyxJQUZGLENBREY7QUFNRCxHQVBNLE1BT0E7QUFDTE4sVUFBTUgsTUFBTUcsR0FBTixDQUFOLENBREssQ0FDYTtBQUNsQkMsVUFBTUosTUFBTUksR0FBTixDQUFOLENBRkssQ0FFYTs7QUFFbEIsV0FBT0EsSUFBSU8sa0JBQUosQ0FBdUJSLEdBQXZCLENBQVA7QUFDRDtBQUNGOztBQUVEUyxPQUFPQyxPQUFQLEdBQWlCWCxtQkFBakIiLCJmaWxlIjoidHJhbnNmb3JtLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgbmVjZXNzYXJ5ID0gcmVxdWlyZSgnbmVjZXNzYXJ5Jyk7XHJcblxyXG5jb25zdCB7IGFycmF5VXRpbGl0aWVzIH0gPSBuZWNlc3NhcnksXHJcbiAgICAgIHsgZmlyc3QsIHRhaWwgfSA9IGFycmF5VXRpbGl0aWVzO1xyXG5cclxuZnVuY3Rpb24gdHJhbnNmb3JtT3BlcmF0aW9ucyh0YXUsIHJobykge1xyXG4gIGlmICgodGF1Lmxlbmd0aCA9PT0gMCkgfHwgKHJoby5sZW5ndGggPT09IDApKSB7XHJcbiAgICByZXR1cm4gdGF1O1xyXG4gIH1cclxuXHJcbiAgY29uc3QgdGF1MSA9IFtmaXJzdCh0YXUpXSxcclxuICAgICAgICB0YXUyID0gdGFpbCh0YXUpLFxyXG4gICAgICAgIHJobzEgPSBbZmlyc3QocmhvKV0sXHJcbiAgICAgICAgcmhvMiA9IHRhaWwocmhvKTtcclxuXHJcbiAgaWYgKHRhdS5sZW5ndGggPiAxICYmIHJoby5sZW5ndGggPiAxKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICB0cmFuc2Zvcm1PcGVyYXRpb25zKFxyXG4gICAgICAgIHRyYW5zZm9ybU9wZXJhdGlvbnModGF1MSwgcmhvMSksXHJcbiAgICAgICAgcmhvMlxyXG4gICAgICApLmNvbmNhdChcclxuICAgICAgICB0cmFuc2Zvcm1PcGVyYXRpb25zKFxyXG4gICAgICAgICAgdHJhbnNmb3JtT3BlcmF0aW9ucyhcclxuICAgICAgICAgICAgdGF1MixcclxuICAgICAgICAgICAgdHJhbnNmb3JtT3BlcmF0aW9ucyhyaG8xLCB0YXUxKVxyXG4gICAgICAgICAgKSxcclxuICAgICAgICAgIHRyYW5zZm9ybU9wZXJhdGlvbnMoXHJcbiAgICAgICAgICAgIHJobzIsXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybU9wZXJhdGlvbnModGF1MSwgcmhvMSlcclxuICAgICAgICAgIClcclxuICAgICAgICApXHJcbiAgICAgIClcclxuICAgICk7XHJcbiAgfSBlbHNlIGlmICgodGF1Lmxlbmd0aCA+IDEpICYmIChyaG8ubGVuZ3RoID09PSAxKSkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgdHJhbnNmb3JtT3BlcmF0aW9ucyh0YXUxLCByaG8pLmNvbmNhdChcclxuICAgICAgICB0cmFuc2Zvcm1PcGVyYXRpb25zKFxyXG4gICAgICAgICAgdGF1MixcclxuICAgICAgICAgIHRyYW5zZm9ybU9wZXJhdGlvbnMocmhvLCB0YXUxKVxyXG4gICAgICAgIClcclxuICAgICAgKVxyXG4gICAgKTtcclxuICB9IGVsc2UgaWYgKCh0YXUubGVuZ3RoID09PSAxKSAmJiAocmhvLmxlbmd0aCA+IDEpKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICB0cmFuc2Zvcm1PcGVyYXRpb25zKFxyXG4gICAgICAgIHRyYW5zZm9ybU9wZXJhdGlvbnModGF1LCByaG8xKSxcclxuICAgICAgICByaG8yXHJcbiAgICAgIClcclxuICAgICk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRhdSA9IGZpcnN0KHRhdSk7IC8vL1xyXG4gICAgcmhvID0gZmlyc3QocmhvKTsgLy8vXHJcblxyXG4gICAgcmV0dXJuIHJoby50cmFuc2Zvcm1PcGVyYXRpb24odGF1KTtcclxuICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHRyYW5zZm9ybU9wZXJhdGlvbnM7XHJcbiJdfQ==