'use strict';

var InsertOperation = require('../operation/insert'),
    DeleteOperation = require('../operation/delete');

function generateOperations(workingContent, editableContent) {
  var operations = [];

  var left = void 0,
      right = void 0,
      length = void 0,
      string = void 0,
      position = void 0;

  for (left = 0; left < workingContent.length && left < editableContent.length && workingContent[left] === editableContent[left]; left++) {}

  for (right = 0; right < workingContent.length - left && right < editableContent.length - left && workingContent[workingContent.length - right - 1] === editableContent[editableContent.length - right - 1]; right++) {}

  if (left + right !== workingContent.length) {
    length = workingContent.length - left - right; ///
    position = left; ///

    var deleteOperation = DeleteOperation.fromLengthAndPosition(length, position);

    operations.push(deleteOperation);
  }

  if (left + right !== editableContent.length) {
    string = editableContent.substring(left, editableContent.length - right); ///
    position = left; ///

    var insertOperation = InsertOperation.fromStringAndPosition(string, position);

    operations.push(insertOperation);
  }

  return operations;
}

module.exports = generateOperations;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi9vcGVyYXRpb25zL2dlbmVyYXRlLmpzIl0sIm5hbWVzIjpbIkluc2VydE9wZXJhdGlvbiIsInJlcXVpcmUiLCJEZWxldGVPcGVyYXRpb24iLCJnZW5lcmF0ZU9wZXJhdGlvbnMiLCJ3b3JraW5nQ29udGVudCIsImVkaXRhYmxlQ29udGVudCIsIm9wZXJhdGlvbnMiLCJsZWZ0IiwicmlnaHQiLCJsZW5ndGgiLCJzdHJpbmciLCJwb3NpdGlvbiIsImRlbGV0ZU9wZXJhdGlvbiIsImZyb21MZW5ndGhBbmRQb3NpdGlvbiIsInB1c2giLCJzdWJzdHJpbmciLCJpbnNlcnRPcGVyYXRpb24iLCJmcm9tU3RyaW5nQW5kUG9zaXRpb24iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFNQSxrQkFBa0JDLFFBQVEscUJBQVIsQ0FBeEI7QUFBQSxJQUNNQyxrQkFBa0JELFFBQVEscUJBQVIsQ0FEeEI7O0FBR0EsU0FBU0Usa0JBQVQsQ0FBNEJDLGNBQTVCLEVBQTRDQyxlQUE1QyxFQUE2RDtBQUMzRCxNQUFNQyxhQUFhLEVBQW5COztBQUVBLE1BQUlDLGFBQUo7QUFBQSxNQUFVQyxjQUFWO0FBQUEsTUFBaUJDLGVBQWpCO0FBQUEsTUFBeUJDLGVBQXpCO0FBQUEsTUFBaUNDLGlCQUFqQzs7QUFFQSxPQUFLSixPQUFPLENBQVosRUFBZ0JBLE9BQU9ILGVBQWVLLE1BQXZCLElBQW1DRixPQUFPRixnQkFBZ0JJLE1BQTFELElBQXNFTCxlQUFlRyxJQUFmLE1BQXlCRixnQkFBZ0JFLElBQWhCLENBQTlHLEVBQXNJQSxNQUF0SSxFQUE4SSxDQUFFOztBQUVoSixPQUFLQyxRQUFRLENBQWIsRUFBaUJBLFFBQVFKLGVBQWVLLE1BQWYsR0FBd0JGLElBQWpDLElBQTJDQyxRQUFRSCxnQkFBZ0JJLE1BQWhCLEdBQXlCRixJQUE1RSxJQUFzRkgsZUFBZUEsZUFBZUssTUFBZixHQUF3QkQsS0FBeEIsR0FBZ0MsQ0FBL0MsTUFBc0RILGdCQUFnQkEsZ0JBQWdCSSxNQUFoQixHQUF5QkQsS0FBekIsR0FBaUMsQ0FBakQsQ0FBNUosRUFBa05BLE9BQWxOLEVBQTJOLENBQUU7O0FBRTdOLE1BQUlELE9BQU9DLEtBQVAsS0FBaUJKLGVBQWVLLE1BQXBDLEVBQTRDO0FBQzFDQSxhQUFTTCxlQUFlSyxNQUFmLEdBQXdCRixJQUF4QixHQUErQkMsS0FBeEMsQ0FEMEMsQ0FDTTtBQUNoREcsZUFBV0osSUFBWCxDQUYwQyxDQUV6Qjs7QUFFakIsUUFBTUssa0JBQWtCVixnQkFBZ0JXLHFCQUFoQixDQUFzQ0osTUFBdEMsRUFBOENFLFFBQTlDLENBQXhCOztBQUVBTCxlQUFXUSxJQUFYLENBQWdCRixlQUFoQjtBQUNEOztBQUVELE1BQUlMLE9BQU9DLEtBQVAsS0FBaUJILGdCQUFnQkksTUFBckMsRUFBNkM7QUFDM0NDLGFBQVNMLGdCQUFnQlUsU0FBaEIsQ0FBMEJSLElBQTFCLEVBQWdDRixnQkFBZ0JJLE1BQWhCLEdBQXlCRCxLQUF6RCxDQUFULENBRDJDLENBQ2dDO0FBQzNFRyxlQUFXSixJQUFYLENBRjJDLENBRTFCOztBQUVqQixRQUFNUyxrQkFBa0JoQixnQkFBZ0JpQixxQkFBaEIsQ0FBc0NQLE1BQXRDLEVBQThDQyxRQUE5QyxDQUF4Qjs7QUFFQUwsZUFBV1EsSUFBWCxDQUFnQkUsZUFBaEI7QUFDRDs7QUFFRCxTQUFPVixVQUFQO0FBQ0Q7O0FBRURZLE9BQU9DLE9BQVAsR0FBaUJoQixrQkFBakIiLCJmaWxlIjoiZ2VuZXJhdGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG5jb25zdCBJbnNlcnRPcGVyYXRpb24gPSByZXF1aXJlKCcuLi9vcGVyYXRpb24vaW5zZXJ0JyksXHJcbiAgICAgIERlbGV0ZU9wZXJhdGlvbiA9IHJlcXVpcmUoJy4uL29wZXJhdGlvbi9kZWxldGUnKTtcclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlT3BlcmF0aW9ucyh3b3JraW5nQ29udGVudCwgZWRpdGFibGVDb250ZW50KSB7XHJcbiAgY29uc3Qgb3BlcmF0aW9ucyA9IFtdO1xyXG4gIFxyXG4gIGxldCBsZWZ0LCByaWdodCwgbGVuZ3RoLCBzdHJpbmcsIHBvc2l0aW9uO1xyXG5cclxuICBmb3IgKGxlZnQgPSAwOyAobGVmdCA8IHdvcmtpbmdDb250ZW50Lmxlbmd0aCkgJiYgKGxlZnQgPCBlZGl0YWJsZUNvbnRlbnQubGVuZ3RoKSAmJiAod29ya2luZ0NvbnRlbnRbbGVmdF0gPT09IGVkaXRhYmxlQ29udGVudFtsZWZ0XSk7IGxlZnQrKykge31cclxuXHJcbiAgZm9yIChyaWdodCA9IDA7IChyaWdodCA8IHdvcmtpbmdDb250ZW50Lmxlbmd0aCAtIGxlZnQpICYmIChyaWdodCA8IGVkaXRhYmxlQ29udGVudC5sZW5ndGggLSBsZWZ0KSAmJiAod29ya2luZ0NvbnRlbnRbd29ya2luZ0NvbnRlbnQubGVuZ3RoIC0gcmlnaHQgLSAxXSA9PT0gZWRpdGFibGVDb250ZW50W2VkaXRhYmxlQ29udGVudC5sZW5ndGggLSByaWdodCAtIDFdKTsgcmlnaHQrKykge31cclxuXHJcbiAgaWYgKGxlZnQgKyByaWdodCAhPT0gd29ya2luZ0NvbnRlbnQubGVuZ3RoKSB7XHJcbiAgICBsZW5ndGggPSB3b3JraW5nQ29udGVudC5sZW5ndGggLSBsZWZ0IC0gcmlnaHQ7ICAvLy9cclxuICAgIHBvc2l0aW9uID0gbGVmdDsgLy8vXHJcbiAgICBcclxuICAgIGNvbnN0IGRlbGV0ZU9wZXJhdGlvbiA9IERlbGV0ZU9wZXJhdGlvbi5mcm9tTGVuZ3RoQW5kUG9zaXRpb24obGVuZ3RoLCBwb3NpdGlvbik7XHJcblxyXG4gICAgb3BlcmF0aW9ucy5wdXNoKGRlbGV0ZU9wZXJhdGlvbik7XHJcbiAgfVxyXG5cclxuICBpZiAobGVmdCArIHJpZ2h0ICE9PSBlZGl0YWJsZUNvbnRlbnQubGVuZ3RoKSB7XHJcbiAgICBzdHJpbmcgPSBlZGl0YWJsZUNvbnRlbnQuc3Vic3RyaW5nKGxlZnQsIGVkaXRhYmxlQ29udGVudC5sZW5ndGggLSByaWdodCk7ICAvLy9cclxuICAgIHBvc2l0aW9uID0gbGVmdDsgLy8vXHJcbiAgICBcclxuICAgIGNvbnN0IGluc2VydE9wZXJhdGlvbiA9IEluc2VydE9wZXJhdGlvbi5mcm9tU3RyaW5nQW5kUG9zaXRpb24oc3RyaW5nLCBwb3NpdGlvbik7XHJcblxyXG4gICAgb3BlcmF0aW9ucy5wdXNoKGluc2VydE9wZXJhdGlvbik7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gb3BlcmF0aW9ucztcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnZW5lcmF0ZU9wZXJhdGlvbnM7XHJcbiJdfQ==