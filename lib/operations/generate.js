'use strict';

var InsertOperation = require('../operation/insert'),
    DeleteOperation = require('../operation/delete');

function generateOperations(content, previousContent) {
  var operations = [];

  var left = void 0,
      right = void 0,
      length = void 0,
      string = void 0,
      position = void 0;

  for (left = 0; left < previousContent.length && left < content.length && previousContent[left] === content[left]; left++) {}

  for (right = 0; right < previousContent.length - left && right < content.length - left && previousContent[previousContent.length - right - 1] === content[content.length - right - 1]; right++) {}

  if (left + right !== previousContent.length) {
    length = previousContent.length - left - right; ///
    position = left; ///

    var deleteOperation = DeleteOperation.fromLengthAndPosition(length, position);

    operations.push(deleteOperation);
  }

  if (left + right !== content.length) {
    string = content.substring(left, content.length - right); ///
    position = left; ///

    var insertOperation = InsertOperation.fromStringAndPosition(string, position);

    operations.push(insertOperation);
  }

  return operations;
}

module.exports = generateOperations;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi9vcGVyYXRpb25zL2dlbmVyYXRlLmpzIl0sIm5hbWVzIjpbIkluc2VydE9wZXJhdGlvbiIsInJlcXVpcmUiLCJEZWxldGVPcGVyYXRpb24iLCJnZW5lcmF0ZU9wZXJhdGlvbnMiLCJjb250ZW50IiwicHJldmlvdXNDb250ZW50Iiwib3BlcmF0aW9ucyIsImxlZnQiLCJyaWdodCIsImxlbmd0aCIsInN0cmluZyIsInBvc2l0aW9uIiwiZGVsZXRlT3BlcmF0aW9uIiwiZnJvbUxlbmd0aEFuZFBvc2l0aW9uIiwicHVzaCIsInN1YnN0cmluZyIsImluc2VydE9wZXJhdGlvbiIsImZyb21TdHJpbmdBbmRQb3NpdGlvbiIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLGtCQUFrQkMsUUFBUSxxQkFBUixDQUF4QjtBQUFBLElBQ01DLGtCQUFrQkQsUUFBUSxxQkFBUixDQUR4Qjs7QUFHQSxTQUFTRSxrQkFBVCxDQUE0QkMsT0FBNUIsRUFBcUNDLGVBQXJDLEVBQXNEO0FBQ3BELE1BQU1DLGFBQWEsRUFBbkI7O0FBRUEsTUFBSUMsYUFBSjtBQUFBLE1BQVVDLGNBQVY7QUFBQSxNQUFpQkMsZUFBakI7QUFBQSxNQUF5QkMsZUFBekI7QUFBQSxNQUFpQ0MsaUJBQWpDOztBQUVBLE9BQUtKLE9BQU8sQ0FBWixFQUFnQkEsT0FBT0YsZ0JBQWdCSSxNQUF4QixJQUFvQ0YsT0FBT0gsUUFBUUssTUFBbkQsSUFBK0RKLGdCQUFnQkUsSUFBaEIsTUFBMEJILFFBQVFHLElBQVIsQ0FBeEcsRUFBd0hBLE1BQXhILEVBQWdJLENBQUU7O0FBRWxJLE9BQUtDLFFBQVEsQ0FBYixFQUFpQkEsUUFBUUgsZ0JBQWdCSSxNQUFoQixHQUF5QkYsSUFBbEMsSUFBNENDLFFBQVFKLFFBQVFLLE1BQVIsR0FBaUJGLElBQXJFLElBQStFRixnQkFBZ0JBLGdCQUFnQkksTUFBaEIsR0FBeUJELEtBQXpCLEdBQWlDLENBQWpELE1BQXdESixRQUFRQSxRQUFRSyxNQUFSLEdBQWlCRCxLQUFqQixHQUF5QixDQUFqQyxDQUF2SixFQUE2TEEsT0FBN0wsRUFBc00sQ0FBRTs7QUFFeE0sTUFBSUQsT0FBT0MsS0FBUCxLQUFpQkgsZ0JBQWdCSSxNQUFyQyxFQUE2QztBQUMzQ0EsYUFBU0osZ0JBQWdCSSxNQUFoQixHQUF5QkYsSUFBekIsR0FBZ0NDLEtBQXpDLENBRDJDLENBQ007QUFDakRHLGVBQVdKLElBQVgsQ0FGMkMsQ0FFMUI7O0FBRWpCLFFBQU1LLGtCQUFrQlYsZ0JBQWdCVyxxQkFBaEIsQ0FBc0NKLE1BQXRDLEVBQThDRSxRQUE5QyxDQUF4Qjs7QUFFQUwsZUFBV1EsSUFBWCxDQUFnQkYsZUFBaEI7QUFDRDs7QUFFRCxNQUFJTCxPQUFPQyxLQUFQLEtBQWlCSixRQUFRSyxNQUE3QixFQUFxQztBQUNuQ0MsYUFBU04sUUFBUVcsU0FBUixDQUFrQlIsSUFBbEIsRUFBd0JILFFBQVFLLE1BQVIsR0FBaUJELEtBQXpDLENBQVQsQ0FEbUMsQ0FDd0I7QUFDM0RHLGVBQVdKLElBQVgsQ0FGbUMsQ0FFbEI7O0FBRWpCLFFBQU1TLGtCQUFrQmhCLGdCQUFnQmlCLHFCQUFoQixDQUFzQ1AsTUFBdEMsRUFBOENDLFFBQTlDLENBQXhCOztBQUVBTCxlQUFXUSxJQUFYLENBQWdCRSxlQUFoQjtBQUNEOztBQUVELFNBQU9WLFVBQVA7QUFDRDs7QUFFRFksT0FBT0MsT0FBUCxHQUFpQmhCLGtCQUFqQiIsImZpbGUiOiJnZW5lcmF0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbmNvbnN0IEluc2VydE9wZXJhdGlvbiA9IHJlcXVpcmUoJy4uL29wZXJhdGlvbi9pbnNlcnQnKSxcclxuICAgICAgRGVsZXRlT3BlcmF0aW9uID0gcmVxdWlyZSgnLi4vb3BlcmF0aW9uL2RlbGV0ZScpO1xyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVPcGVyYXRpb25zKGNvbnRlbnQsIHByZXZpb3VzQ29udGVudCkge1xyXG4gIGNvbnN0IG9wZXJhdGlvbnMgPSBbXTtcclxuICBcclxuICBsZXQgbGVmdCwgcmlnaHQsIGxlbmd0aCwgc3RyaW5nLCBwb3NpdGlvbjtcclxuXHJcbiAgZm9yIChsZWZ0ID0gMDsgKGxlZnQgPCBwcmV2aW91c0NvbnRlbnQubGVuZ3RoKSAmJiAobGVmdCA8IGNvbnRlbnQubGVuZ3RoKSAmJiAocHJldmlvdXNDb250ZW50W2xlZnRdID09PSBjb250ZW50W2xlZnRdKTsgbGVmdCsrKSB7fVxyXG5cclxuICBmb3IgKHJpZ2h0ID0gMDsgKHJpZ2h0IDwgcHJldmlvdXNDb250ZW50Lmxlbmd0aCAtIGxlZnQpICYmIChyaWdodCA8IGNvbnRlbnQubGVuZ3RoIC0gbGVmdCkgJiYgKHByZXZpb3VzQ29udGVudFtwcmV2aW91c0NvbnRlbnQubGVuZ3RoIC0gcmlnaHQgLSAxXSA9PT0gY29udGVudFtjb250ZW50Lmxlbmd0aCAtIHJpZ2h0IC0gMV0pOyByaWdodCsrKSB7fVxyXG5cclxuICBpZiAobGVmdCArIHJpZ2h0ICE9PSBwcmV2aW91c0NvbnRlbnQubGVuZ3RoKSB7XHJcbiAgICBsZW5ndGggPSBwcmV2aW91c0NvbnRlbnQubGVuZ3RoIC0gbGVmdCAtIHJpZ2h0OyAgLy8vXHJcbiAgICBwb3NpdGlvbiA9IGxlZnQ7IC8vL1xyXG4gICAgXHJcbiAgICBjb25zdCBkZWxldGVPcGVyYXRpb24gPSBEZWxldGVPcGVyYXRpb24uZnJvbUxlbmd0aEFuZFBvc2l0aW9uKGxlbmd0aCwgcG9zaXRpb24pO1xyXG5cclxuICAgIG9wZXJhdGlvbnMucHVzaChkZWxldGVPcGVyYXRpb24pO1xyXG4gIH1cclxuXHJcbiAgaWYgKGxlZnQgKyByaWdodCAhPT0gY29udGVudC5sZW5ndGgpIHtcclxuICAgIHN0cmluZyA9IGNvbnRlbnQuc3Vic3RyaW5nKGxlZnQsIGNvbnRlbnQubGVuZ3RoIC0gcmlnaHQpOyAgLy8vXHJcbiAgICBwb3NpdGlvbiA9IGxlZnQ7IC8vL1xyXG4gICAgXHJcbiAgICBjb25zdCBpbnNlcnRPcGVyYXRpb24gPSBJbnNlcnRPcGVyYXRpb24uZnJvbVN0cmluZ0FuZFBvc2l0aW9uKHN0cmluZywgcG9zaXRpb24pO1xyXG5cclxuICAgIG9wZXJhdGlvbnMucHVzaChpbnNlcnRPcGVyYXRpb24pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG9wZXJhdGlvbnM7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZ2VuZXJhdGVPcGVyYXRpb25zO1xyXG4iXX0=