"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = generateOperations;

var _insert = _interopRequireDefault(require("../operation/insert"));

var _delete = _interopRequireDefault(require("../operation/delete"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function generateOperations(workingContent, editableContent) {
  var operations = [];
  var left, right, length, string, position;

  for (left = 0; left < workingContent.length && left < editableContent.length && workingContent[left] === editableContent[left]; left++) {}

  for (right = 0; right < workingContent.length - left && right < editableContent.length - left && workingContent[workingContent.length - right - 1] === editableContent[editableContent.length - right - 1]; right++) {}

  if (left + right !== workingContent.length) {
    length = workingContent.length - left - right; ///

    position = left; ///

    var deleteOperation = _delete["default"].fromLengthAndPosition(length, position);

    operations.push(deleteOperation);
  }

  if (left + right !== editableContent.length) {
    string = editableContent.substring(left, editableContent.length - right); ///

    position = left; ///

    var insertOperation = _insert["default"].fromStringAndPosition(string, position);

    operations.push(insertOperation);
  }

  return operations;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdlbmVyYXRlLmpzIl0sIm5hbWVzIjpbImdlbmVyYXRlT3BlcmF0aW9ucyIsIndvcmtpbmdDb250ZW50IiwiZWRpdGFibGVDb250ZW50Iiwib3BlcmF0aW9ucyIsImxlZnQiLCJyaWdodCIsImxlbmd0aCIsInN0cmluZyIsInBvc2l0aW9uIiwiZGVsZXRlT3BlcmF0aW9uIiwiRGVsZXRlT3BlcmF0aW9uIiwiZnJvbUxlbmd0aEFuZFBvc2l0aW9uIiwicHVzaCIsInN1YnN0cmluZyIsImluc2VydE9wZXJhdGlvbiIsIkluc2VydE9wZXJhdGlvbiIsImZyb21TdHJpbmdBbmRQb3NpdGlvbiJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7QUFFQTs7QUFDQTs7OztBQUVlLFNBQVNBLGtCQUFULENBQTRCQyxjQUE1QixFQUE0Q0MsZUFBNUMsRUFBNkQ7QUFDMUUsTUFBTUMsVUFBVSxHQUFHLEVBQW5CO0FBRUEsTUFBSUMsSUFBSixFQUFVQyxLQUFWLEVBQWlCQyxNQUFqQixFQUF5QkMsTUFBekIsRUFBaUNDLFFBQWpDOztBQUVBLE9BQUtKLElBQUksR0FBRyxDQUFaLEVBQWdCQSxJQUFJLEdBQUdILGNBQWMsQ0FBQ0ssTUFBdkIsSUFBbUNGLElBQUksR0FBR0YsZUFBZSxDQUFDSSxNQUExRCxJQUFzRUwsY0FBYyxDQUFDRyxJQUFELENBQWQsS0FBeUJGLGVBQWUsQ0FBQ0UsSUFBRCxDQUE3SCxFQUFzSUEsSUFBSSxFQUExSSxFQUE4SSxDQUFFOztBQUVoSixPQUFLQyxLQUFLLEdBQUcsQ0FBYixFQUFpQkEsS0FBSyxHQUFHSixjQUFjLENBQUNLLE1BQWYsR0FBd0JGLElBQWpDLElBQTJDQyxLQUFLLEdBQUdILGVBQWUsQ0FBQ0ksTUFBaEIsR0FBeUJGLElBQTVFLElBQXNGSCxjQUFjLENBQUNBLGNBQWMsQ0FBQ0ssTUFBZixHQUF3QkQsS0FBeEIsR0FBZ0MsQ0FBakMsQ0FBZCxLQUFzREgsZUFBZSxDQUFDQSxlQUFlLENBQUNJLE1BQWhCLEdBQXlCRCxLQUF6QixHQUFpQyxDQUFsQyxDQUEzSyxFQUFrTkEsS0FBSyxFQUF2TixFQUEyTixDQUFFOztBQUU3TixNQUFJRCxJQUFJLEdBQUdDLEtBQVAsS0FBaUJKLGNBQWMsQ0FBQ0ssTUFBcEMsRUFBNEM7QUFDMUNBLElBQUFBLE1BQU0sR0FBR0wsY0FBYyxDQUFDSyxNQUFmLEdBQXdCRixJQUF4QixHQUErQkMsS0FBeEMsQ0FEMEMsQ0FDTTs7QUFDaERHLElBQUFBLFFBQVEsR0FBR0osSUFBWCxDQUYwQyxDQUV6Qjs7QUFFakIsUUFBTUssZUFBZSxHQUFHQyxtQkFBZ0JDLHFCQUFoQixDQUFzQ0wsTUFBdEMsRUFBOENFLFFBQTlDLENBQXhCOztBQUVBTCxJQUFBQSxVQUFVLENBQUNTLElBQVgsQ0FBZ0JILGVBQWhCO0FBQ0Q7O0FBRUQsTUFBSUwsSUFBSSxHQUFHQyxLQUFQLEtBQWlCSCxlQUFlLENBQUNJLE1BQXJDLEVBQTZDO0FBQzNDQyxJQUFBQSxNQUFNLEdBQUdMLGVBQWUsQ0FBQ1csU0FBaEIsQ0FBMEJULElBQTFCLEVBQWdDRixlQUFlLENBQUNJLE1BQWhCLEdBQXlCRCxLQUF6RCxDQUFULENBRDJDLENBQ2dDOztBQUMzRUcsSUFBQUEsUUFBUSxHQUFHSixJQUFYLENBRjJDLENBRTFCOztBQUVqQixRQUFNVSxlQUFlLEdBQUdDLG1CQUFnQkMscUJBQWhCLENBQXNDVCxNQUF0QyxFQUE4Q0MsUUFBOUMsQ0FBeEI7O0FBRUFMLElBQUFBLFVBQVUsQ0FBQ1MsSUFBWCxDQUFnQkUsZUFBaEI7QUFDRDs7QUFFRCxTQUFPWCxVQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuXHJcbmltcG9ydCBJbnNlcnRPcGVyYXRpb24gZnJvbSBcIi4uL29wZXJhdGlvbi9pbnNlcnRcIjtcclxuaW1wb3J0IERlbGV0ZU9wZXJhdGlvbiBmcm9tIFwiLi4vb3BlcmF0aW9uL2RlbGV0ZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2VuZXJhdGVPcGVyYXRpb25zKHdvcmtpbmdDb250ZW50LCBlZGl0YWJsZUNvbnRlbnQpIHtcclxuICBjb25zdCBvcGVyYXRpb25zID0gW107XHJcbiAgXHJcbiAgbGV0IGxlZnQsIHJpZ2h0LCBsZW5ndGgsIHN0cmluZywgcG9zaXRpb247XHJcblxyXG4gIGZvciAobGVmdCA9IDA7IChsZWZ0IDwgd29ya2luZ0NvbnRlbnQubGVuZ3RoKSAmJiAobGVmdCA8IGVkaXRhYmxlQ29udGVudC5sZW5ndGgpICYmICh3b3JraW5nQ29udGVudFtsZWZ0XSA9PT0gZWRpdGFibGVDb250ZW50W2xlZnRdKTsgbGVmdCsrKSB7fVxyXG5cclxuICBmb3IgKHJpZ2h0ID0gMDsgKHJpZ2h0IDwgd29ya2luZ0NvbnRlbnQubGVuZ3RoIC0gbGVmdCkgJiYgKHJpZ2h0IDwgZWRpdGFibGVDb250ZW50Lmxlbmd0aCAtIGxlZnQpICYmICh3b3JraW5nQ29udGVudFt3b3JraW5nQ29udGVudC5sZW5ndGggLSByaWdodCAtIDFdID09PSBlZGl0YWJsZUNvbnRlbnRbZWRpdGFibGVDb250ZW50Lmxlbmd0aCAtIHJpZ2h0IC0gMV0pOyByaWdodCsrKSB7fVxyXG5cclxuICBpZiAobGVmdCArIHJpZ2h0ICE9PSB3b3JraW5nQ29udGVudC5sZW5ndGgpIHtcclxuICAgIGxlbmd0aCA9IHdvcmtpbmdDb250ZW50Lmxlbmd0aCAtIGxlZnQgLSByaWdodDsgIC8vL1xyXG4gICAgcG9zaXRpb24gPSBsZWZ0OyAvLy9cclxuICAgIFxyXG4gICAgY29uc3QgZGVsZXRlT3BlcmF0aW9uID0gRGVsZXRlT3BlcmF0aW9uLmZyb21MZW5ndGhBbmRQb3NpdGlvbihsZW5ndGgsIHBvc2l0aW9uKTtcclxuXHJcbiAgICBvcGVyYXRpb25zLnB1c2goZGVsZXRlT3BlcmF0aW9uKTtcclxuICB9XHJcblxyXG4gIGlmIChsZWZ0ICsgcmlnaHQgIT09IGVkaXRhYmxlQ29udGVudC5sZW5ndGgpIHtcclxuICAgIHN0cmluZyA9IGVkaXRhYmxlQ29udGVudC5zdWJzdHJpbmcobGVmdCwgZWRpdGFibGVDb250ZW50Lmxlbmd0aCAtIHJpZ2h0KTsgIC8vL1xyXG4gICAgcG9zaXRpb24gPSBsZWZ0OyAvLy9cclxuICAgIFxyXG4gICAgY29uc3QgaW5zZXJ0T3BlcmF0aW9uID0gSW5zZXJ0T3BlcmF0aW9uLmZyb21TdHJpbmdBbmRQb3NpdGlvbihzdHJpbmcsIHBvc2l0aW9uKTtcclxuXHJcbiAgICBvcGVyYXRpb25zLnB1c2goaW5zZXJ0T3BlcmF0aW9uKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBvcGVyYXRpb25zO1xyXG59XHJcbiJdfQ==