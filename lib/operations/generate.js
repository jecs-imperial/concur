"use strict";

var InsertOperation = require("../operation/insert"),
    DeleteOperation = require("../operation/delete");

function generateOperations(workingContent, editableContent) {
  var operations = [];
  var left, right, length, string, position;

  for (left = 0; left < workingContent.length && left < editableContent.length && workingContent[left] === editableContent[left]; left++) {}

  for (right = 0; right < workingContent.length - left && right < editableContent.length - left && workingContent[workingContent.length - right - 1] === editableContent[editableContent.length - right - 1]; right++) {}

  if (left + right !== workingContent.length) {
    length = workingContent.length - left - right; ///

    position = left; ///

    var deleteOperation = DeleteOperation.fromLengthAndPosition(length, position);
    operations.push(deleteOperation);
  }

  if (left + right !== editableContent.length) {
    string = editableContent.substring(left, editableContent.length - right); ///

    position = left; ///

    var insertOperation = InsertOperation.fromStringAndPosition(string, position);
    operations.push(insertOperation);
  }

  return operations;
}

module.exports = generateOperations;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdlbmVyYXRlLmpzIl0sIm5hbWVzIjpbIkluc2VydE9wZXJhdGlvbiIsInJlcXVpcmUiLCJEZWxldGVPcGVyYXRpb24iLCJnZW5lcmF0ZU9wZXJhdGlvbnMiLCJ3b3JraW5nQ29udGVudCIsImVkaXRhYmxlQ29udGVudCIsIm9wZXJhdGlvbnMiLCJsZWZ0IiwicmlnaHQiLCJsZW5ndGgiLCJzdHJpbmciLCJwb3NpdGlvbiIsImRlbGV0ZU9wZXJhdGlvbiIsImZyb21MZW5ndGhBbmRQb3NpdGlvbiIsInB1c2giLCJzdWJzdHJpbmciLCJpbnNlcnRPcGVyYXRpb24iLCJmcm9tU3RyaW5nQW5kUG9zaXRpb24iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFNQSxlQUFlLEdBQUdDLE9BQU8sQ0FBQyxxQkFBRCxDQUEvQjtBQUFBLElBQ01DLGVBQWUsR0FBR0QsT0FBTyxDQUFDLHFCQUFELENBRC9COztBQUdBLFNBQVNFLGtCQUFULENBQTRCQyxjQUE1QixFQUE0Q0MsZUFBNUMsRUFBNkQ7QUFDM0QsTUFBTUMsVUFBVSxHQUFHLEVBQW5CO0FBRUEsTUFBSUMsSUFBSixFQUFVQyxLQUFWLEVBQWlCQyxNQUFqQixFQUF5QkMsTUFBekIsRUFBaUNDLFFBQWpDOztBQUVBLE9BQUtKLElBQUksR0FBRyxDQUFaLEVBQWdCQSxJQUFJLEdBQUdILGNBQWMsQ0FBQ0ssTUFBdkIsSUFBbUNGLElBQUksR0FBR0YsZUFBZSxDQUFDSSxNQUExRCxJQUFzRUwsY0FBYyxDQUFDRyxJQUFELENBQWQsS0FBeUJGLGVBQWUsQ0FBQ0UsSUFBRCxDQUE3SCxFQUFzSUEsSUFBSSxFQUExSSxFQUE4SSxDQUFFOztBQUVoSixPQUFLQyxLQUFLLEdBQUcsQ0FBYixFQUFpQkEsS0FBSyxHQUFHSixjQUFjLENBQUNLLE1BQWYsR0FBd0JGLElBQWpDLElBQTJDQyxLQUFLLEdBQUdILGVBQWUsQ0FBQ0ksTUFBaEIsR0FBeUJGLElBQTVFLElBQXNGSCxjQUFjLENBQUNBLGNBQWMsQ0FBQ0ssTUFBZixHQUF3QkQsS0FBeEIsR0FBZ0MsQ0FBakMsQ0FBZCxLQUFzREgsZUFBZSxDQUFDQSxlQUFlLENBQUNJLE1BQWhCLEdBQXlCRCxLQUF6QixHQUFpQyxDQUFsQyxDQUEzSyxFQUFrTkEsS0FBSyxFQUF2TixFQUEyTixDQUFFOztBQUU3TixNQUFJRCxJQUFJLEdBQUdDLEtBQVAsS0FBaUJKLGNBQWMsQ0FBQ0ssTUFBcEMsRUFBNEM7QUFDMUNBLElBQUFBLE1BQU0sR0FBR0wsY0FBYyxDQUFDSyxNQUFmLEdBQXdCRixJQUF4QixHQUErQkMsS0FBeEMsQ0FEMEMsQ0FDTTs7QUFDaERHLElBQUFBLFFBQVEsR0FBR0osSUFBWCxDQUYwQyxDQUV6Qjs7QUFFakIsUUFBTUssZUFBZSxHQUFHVixlQUFlLENBQUNXLHFCQUFoQixDQUFzQ0osTUFBdEMsRUFBOENFLFFBQTlDLENBQXhCO0FBRUFMLElBQUFBLFVBQVUsQ0FBQ1EsSUFBWCxDQUFnQkYsZUFBaEI7QUFDRDs7QUFFRCxNQUFJTCxJQUFJLEdBQUdDLEtBQVAsS0FBaUJILGVBQWUsQ0FBQ0ksTUFBckMsRUFBNkM7QUFDM0NDLElBQUFBLE1BQU0sR0FBR0wsZUFBZSxDQUFDVSxTQUFoQixDQUEwQlIsSUFBMUIsRUFBZ0NGLGVBQWUsQ0FBQ0ksTUFBaEIsR0FBeUJELEtBQXpELENBQVQsQ0FEMkMsQ0FDZ0M7O0FBQzNFRyxJQUFBQSxRQUFRLEdBQUdKLElBQVgsQ0FGMkMsQ0FFMUI7O0FBRWpCLFFBQU1TLGVBQWUsR0FBR2hCLGVBQWUsQ0FBQ2lCLHFCQUFoQixDQUFzQ1AsTUFBdEMsRUFBOENDLFFBQTlDLENBQXhCO0FBRUFMLElBQUFBLFVBQVUsQ0FBQ1EsSUFBWCxDQUFnQkUsZUFBaEI7QUFDRDs7QUFFRCxTQUFPVixVQUFQO0FBQ0Q7O0FBRURZLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmhCLGtCQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5cclxuY29uc3QgSW5zZXJ0T3BlcmF0aW9uID0gcmVxdWlyZShcIi4uL29wZXJhdGlvbi9pbnNlcnRcIiksXHJcbiAgICAgIERlbGV0ZU9wZXJhdGlvbiA9IHJlcXVpcmUoXCIuLi9vcGVyYXRpb24vZGVsZXRlXCIpO1xyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVPcGVyYXRpb25zKHdvcmtpbmdDb250ZW50LCBlZGl0YWJsZUNvbnRlbnQpIHtcclxuICBjb25zdCBvcGVyYXRpb25zID0gW107XHJcbiAgXHJcbiAgbGV0IGxlZnQsIHJpZ2h0LCBsZW5ndGgsIHN0cmluZywgcG9zaXRpb247XHJcblxyXG4gIGZvciAobGVmdCA9IDA7IChsZWZ0IDwgd29ya2luZ0NvbnRlbnQubGVuZ3RoKSAmJiAobGVmdCA8IGVkaXRhYmxlQ29udGVudC5sZW5ndGgpICYmICh3b3JraW5nQ29udGVudFtsZWZ0XSA9PT0gZWRpdGFibGVDb250ZW50W2xlZnRdKTsgbGVmdCsrKSB7fVxyXG5cclxuICBmb3IgKHJpZ2h0ID0gMDsgKHJpZ2h0IDwgd29ya2luZ0NvbnRlbnQubGVuZ3RoIC0gbGVmdCkgJiYgKHJpZ2h0IDwgZWRpdGFibGVDb250ZW50Lmxlbmd0aCAtIGxlZnQpICYmICh3b3JraW5nQ29udGVudFt3b3JraW5nQ29udGVudC5sZW5ndGggLSByaWdodCAtIDFdID09PSBlZGl0YWJsZUNvbnRlbnRbZWRpdGFibGVDb250ZW50Lmxlbmd0aCAtIHJpZ2h0IC0gMV0pOyByaWdodCsrKSB7fVxyXG5cclxuICBpZiAobGVmdCArIHJpZ2h0ICE9PSB3b3JraW5nQ29udGVudC5sZW5ndGgpIHtcclxuICAgIGxlbmd0aCA9IHdvcmtpbmdDb250ZW50Lmxlbmd0aCAtIGxlZnQgLSByaWdodDsgIC8vL1xyXG4gICAgcG9zaXRpb24gPSBsZWZ0OyAvLy9cclxuICAgIFxyXG4gICAgY29uc3QgZGVsZXRlT3BlcmF0aW9uID0gRGVsZXRlT3BlcmF0aW9uLmZyb21MZW5ndGhBbmRQb3NpdGlvbihsZW5ndGgsIHBvc2l0aW9uKTtcclxuXHJcbiAgICBvcGVyYXRpb25zLnB1c2goZGVsZXRlT3BlcmF0aW9uKTtcclxuICB9XHJcblxyXG4gIGlmIChsZWZ0ICsgcmlnaHQgIT09IGVkaXRhYmxlQ29udGVudC5sZW5ndGgpIHtcclxuICAgIHN0cmluZyA9IGVkaXRhYmxlQ29udGVudC5zdWJzdHJpbmcobGVmdCwgZWRpdGFibGVDb250ZW50Lmxlbmd0aCAtIHJpZ2h0KTsgIC8vL1xyXG4gICAgcG9zaXRpb24gPSBsZWZ0OyAvLy9cclxuICAgIFxyXG4gICAgY29uc3QgaW5zZXJ0T3BlcmF0aW9uID0gSW5zZXJ0T3BlcmF0aW9uLmZyb21TdHJpbmdBbmRQb3NpdGlvbihzdHJpbmcsIHBvc2l0aW9uKTtcclxuXHJcbiAgICBvcGVyYXRpb25zLnB1c2goaW5zZXJ0T3BlcmF0aW9uKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBvcGVyYXRpb25zO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGdlbmVyYXRlT3BlcmF0aW9ucztcclxuIl19