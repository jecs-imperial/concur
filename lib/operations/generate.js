'use strict';

var InsertOperation = require('../operation/insert'),
    DeleteOperation = require('../operation/delete');

function generateOperations(fromContent, toContent) {
  var operations = [];

  var left = void 0,
      right = void 0,
      length = void 0,
      string = void 0,
      position = void 0;

  for (left = 0; left < fromContent.length && left < toContent.length && fromContent[left] === toContent[left]; left++) {}

  for (right = 0; right < fromContent.length - left && right < toContent.length - left && fromContent[fromContent.length - right - 1] === toContent[toContent.length - right - 1]; right++) {}

  if (left + right !== fromContent.length) {
    length = fromContent.length - left - right; ///
    position = left; ///

    var deleteOperation = new DeleteOperation(length, position);

    operations.push(deleteOperation);
  }

  if (left + right !== toContent.length) {
    string = toContent.substring(left, toContent.length - right); ///
    position = left; ///

    var insertOperation = new InsertOperation(string, position);

    operations.push(insertOperation);
  }

  return operations;
};

module.exports = generateOperations;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi9vcGVyYXRpb25zL2dlbmVyYXRlLmpzIl0sIm5hbWVzIjpbIkluc2VydE9wZXJhdGlvbiIsInJlcXVpcmUiLCJEZWxldGVPcGVyYXRpb24iLCJnZW5lcmF0ZU9wZXJhdGlvbnMiLCJmcm9tQ29udGVudCIsInRvQ29udGVudCIsIm9wZXJhdGlvbnMiLCJsZWZ0IiwicmlnaHQiLCJsZW5ndGgiLCJzdHJpbmciLCJwb3NpdGlvbiIsImRlbGV0ZU9wZXJhdGlvbiIsInB1c2giLCJzdWJzdHJpbmciLCJpbnNlcnRPcGVyYXRpb24iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFNQSxrQkFBa0JDLFFBQVEscUJBQVIsQ0FBeEI7QUFBQSxJQUNNQyxrQkFBa0JELFFBQVEscUJBQVIsQ0FEeEI7O0FBR0EsU0FBU0Usa0JBQVQsQ0FBNEJDLFdBQTVCLEVBQXlDQyxTQUF6QyxFQUFvRDtBQUNsRCxNQUFNQyxhQUFhLEVBQW5COztBQUVBLE1BQUlDLGFBQUo7QUFBQSxNQUFVQyxjQUFWO0FBQUEsTUFBaUJDLGVBQWpCO0FBQUEsTUFBeUJDLGVBQXpCO0FBQUEsTUFBaUNDLGlCQUFqQzs7QUFFQSxPQUFLSixPQUFPLENBQVosRUFBZ0JBLE9BQU9ILFlBQVlLLE1BQXBCLElBQWdDRixPQUFPRixVQUFVSSxNQUFqRCxJQUE2REwsWUFBWUcsSUFBWixNQUFzQkYsVUFBVUUsSUFBVixDQUFsRyxFQUFvSEEsTUFBcEgsRUFBNEgsQ0FBRTs7QUFFOUgsT0FBS0MsUUFBUSxDQUFiLEVBQWlCQSxRQUFRSixZQUFZSyxNQUFaLEdBQXFCRixJQUE5QixJQUF3Q0MsUUFBUUgsVUFBVUksTUFBVixHQUFtQkYsSUFBbkUsSUFBNkVILFlBQVlBLFlBQVlLLE1BQVosR0FBcUJELEtBQXJCLEdBQTZCLENBQXpDLE1BQWdESCxVQUFVQSxVQUFVSSxNQUFWLEdBQW1CRCxLQUFuQixHQUEyQixDQUFyQyxDQUE3SSxFQUF1TEEsT0FBdkwsRUFBZ00sQ0FBRTs7QUFFbE0sTUFBSUQsT0FBT0MsS0FBUCxLQUFpQkosWUFBWUssTUFBakMsRUFBeUM7QUFDdkNBLGFBQVNMLFlBQVlLLE1BQVosR0FBcUJGLElBQXJCLEdBQTRCQyxLQUFyQyxDQUR1QyxDQUNNO0FBQzdDRyxlQUFXSixJQUFYLENBRnVDLENBRXRCOztBQUVqQixRQUFNSyxrQkFBa0IsSUFBSVYsZUFBSixDQUFvQk8sTUFBcEIsRUFBNEJFLFFBQTVCLENBQXhCOztBQUVBTCxlQUFXTyxJQUFYLENBQWdCRCxlQUFoQjtBQUNEOztBQUVELE1BQUlMLE9BQU9DLEtBQVAsS0FBaUJILFVBQVVJLE1BQS9CLEVBQXVDO0FBQ3JDQyxhQUFTTCxVQUFVUyxTQUFWLENBQW9CUCxJQUFwQixFQUEwQkYsVUFBVUksTUFBVixHQUFtQkQsS0FBN0MsQ0FBVCxDQURxQyxDQUMwQjtBQUMvREcsZUFBV0osSUFBWCxDQUZxQyxDQUVwQjs7QUFFakIsUUFBTVEsa0JBQWtCLElBQUlmLGVBQUosQ0FBb0JVLE1BQXBCLEVBQTRCQyxRQUE1QixDQUF4Qjs7QUFFQUwsZUFBV08sSUFBWCxDQUFnQkUsZUFBaEI7QUFDRDs7QUFFRCxTQUFPVCxVQUFQO0FBQ0Q7O0FBRURVLE9BQU9DLE9BQVAsR0FBaUJkLGtCQUFqQiIsImZpbGUiOiJnZW5lcmF0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbmNvbnN0IEluc2VydE9wZXJhdGlvbiA9IHJlcXVpcmUoJy4uL29wZXJhdGlvbi9pbnNlcnQnKSxcclxuICAgICAgRGVsZXRlT3BlcmF0aW9uID0gcmVxdWlyZSgnLi4vb3BlcmF0aW9uL2RlbGV0ZScpO1xyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVPcGVyYXRpb25zKGZyb21Db250ZW50LCB0b0NvbnRlbnQpIHtcclxuICBjb25zdCBvcGVyYXRpb25zID0gW107XHJcbiAgXHJcbiAgbGV0IGxlZnQsIHJpZ2h0LCBsZW5ndGgsIHN0cmluZywgcG9zaXRpb247XHJcblxyXG4gIGZvciAobGVmdCA9IDA7IChsZWZ0IDwgZnJvbUNvbnRlbnQubGVuZ3RoKSAmJiAobGVmdCA8IHRvQ29udGVudC5sZW5ndGgpICYmIChmcm9tQ29udGVudFtsZWZ0XSA9PT0gdG9Db250ZW50W2xlZnRdKTsgbGVmdCsrKSB7fVxyXG5cclxuICBmb3IgKHJpZ2h0ID0gMDsgKHJpZ2h0IDwgZnJvbUNvbnRlbnQubGVuZ3RoIC0gbGVmdCkgJiYgKHJpZ2h0IDwgdG9Db250ZW50Lmxlbmd0aCAtIGxlZnQpICYmIChmcm9tQ29udGVudFtmcm9tQ29udGVudC5sZW5ndGggLSByaWdodCAtIDFdID09PSB0b0NvbnRlbnRbdG9Db250ZW50Lmxlbmd0aCAtIHJpZ2h0IC0gMV0pOyByaWdodCsrKSB7fVxyXG5cclxuICBpZiAobGVmdCArIHJpZ2h0ICE9PSBmcm9tQ29udGVudC5sZW5ndGgpIHtcclxuICAgIGxlbmd0aCA9IGZyb21Db250ZW50Lmxlbmd0aCAtIGxlZnQgLSByaWdodDsgIC8vL1xyXG4gICAgcG9zaXRpb24gPSBsZWZ0OyAvLy9cclxuICAgIFxyXG4gICAgY29uc3QgZGVsZXRlT3BlcmF0aW9uID0gbmV3IERlbGV0ZU9wZXJhdGlvbihsZW5ndGgsIHBvc2l0aW9uKTtcclxuXHJcbiAgICBvcGVyYXRpb25zLnB1c2goZGVsZXRlT3BlcmF0aW9uKTtcclxuICB9XHJcblxyXG4gIGlmIChsZWZ0ICsgcmlnaHQgIT09IHRvQ29udGVudC5sZW5ndGgpIHtcclxuICAgIHN0cmluZyA9IHRvQ29udGVudC5zdWJzdHJpbmcobGVmdCwgdG9Db250ZW50Lmxlbmd0aCAtIHJpZ2h0KTsgIC8vL1xyXG4gICAgcG9zaXRpb24gPSBsZWZ0OyAvLy9cclxuICAgIFxyXG4gICAgY29uc3QgaW5zZXJ0T3BlcmF0aW9uID0gbmV3IEluc2VydE9wZXJhdGlvbihzdHJpbmcsIHBvc2l0aW9uKTtcclxuXHJcbiAgICBvcGVyYXRpb25zLnB1c2goaW5zZXJ0T3BlcmF0aW9uKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBvcGVyYXRpb25zO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnZW5lcmF0ZU9wZXJhdGlvbnM7XHJcbiJdfQ==