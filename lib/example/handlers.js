'use strict';

var UpdateTransaction = require('./transaction/update'),
    InitialiseTransaction = require('./transaction/initialise');

var updateTransactionHandler = createHandler(UpdateTransaction),
    initialiseTransactionHandler = createHandler(InitialiseTransaction);

module.exports = {
    updateTransactionHandler: updateTransactionHandler,
    initialiseTransactionHandler: initialiseTransactionHandler
};

function createHandler(Transaction) {
    return function (request, response, next) {
        var body = request.body;


        var json = body; ///

        var transaction = Transaction.fromJSON(json);

        json = transaction.toJSON();

        var statusCode = 200,
            headers = { 'Content-Type': 'application/json; charset=utf-8' },
            content = JSON.stringify(json);

        response.writeHead(statusCode, headers);

        response.write(content);

        response.end();
    };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi9leGFtcGxlL2hhbmRsZXJzLmpzIl0sIm5hbWVzIjpbIlVwZGF0ZVRyYW5zYWN0aW9uIiwicmVxdWlyZSIsIkluaXRpYWxpc2VUcmFuc2FjdGlvbiIsInVwZGF0ZVRyYW5zYWN0aW9uSGFuZGxlciIsImNyZWF0ZUhhbmRsZXIiLCJpbml0aWFsaXNlVHJhbnNhY3Rpb25IYW5kbGVyIiwibW9kdWxlIiwiZXhwb3J0cyIsIlRyYW5zYWN0aW9uIiwicmVxdWVzdCIsInJlc3BvbnNlIiwibmV4dCIsImJvZHkiLCJqc29uIiwidHJhbnNhY3Rpb24iLCJmcm9tSlNPTiIsInRvSlNPTiIsInN0YXR1c0NvZGUiLCJoZWFkZXJzIiwiY29udGVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJ3cml0ZUhlYWQiLCJ3cml0ZSIsImVuZCJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsSUFBTUEsb0JBQW9CQyxRQUFRLHNCQUFSLENBQTFCO0FBQUEsSUFDTUMsd0JBQXdCRCxRQUFRLDBCQUFSLENBRDlCOztBQUdBLElBQU1FLDJCQUEyQkMsY0FBY0osaUJBQWQsQ0FBakM7QUFBQSxJQUNNSywrQkFBK0JELGNBQWNGLHFCQUFkLENBRHJDOztBQUdBSSxPQUFPQyxPQUFQLEdBQWlCO0FBQ2ZKLHNEQURlO0FBRWZFO0FBRmUsQ0FBakI7O0FBS0EsU0FBU0QsYUFBVCxDQUF1QkksV0FBdkIsRUFBb0M7QUFDbEMsV0FBTyxVQUFTQyxPQUFULEVBQWtCQyxRQUFsQixFQUE0QkMsSUFBNUIsRUFBa0M7QUFBQSxZQUMvQkMsSUFEK0IsR0FDdEJILE9BRHNCLENBQy9CRyxJQUQrQjs7O0FBR3ZDLFlBQUlDLE9BQU9ELElBQVgsQ0FIdUMsQ0FHckI7O0FBRWxCLFlBQU1FLGNBQWNOLFlBQVlPLFFBQVosQ0FBcUJGLElBQXJCLENBQXBCOztBQUVBQSxlQUFPQyxZQUFZRSxNQUFaLEVBQVA7O0FBRUEsWUFBTUMsYUFBYSxHQUFuQjtBQUFBLFlBQ01DLFVBQVUsRUFBRSxnQkFBZ0IsaUNBQWxCLEVBRGhCO0FBQUEsWUFFTUMsVUFBVUMsS0FBS0MsU0FBTCxDQUFlUixJQUFmLENBRmhCOztBQUlBSCxpQkFBU1ksU0FBVCxDQUFtQkwsVUFBbkIsRUFBK0JDLE9BQS9COztBQUVBUixpQkFBU2EsS0FBVCxDQUFlSixPQUFmOztBQUVBVCxpQkFBU2MsR0FBVDtBQUNELEtBbEJEO0FBbUJEIiwiZmlsZSI6ImhhbmRsZXJzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgVXBkYXRlVHJhbnNhY3Rpb24gPSByZXF1aXJlKCcuL3RyYW5zYWN0aW9uL3VwZGF0ZScpLFxyXG4gICAgICBJbml0aWFsaXNlVHJhbnNhY3Rpb24gPSByZXF1aXJlKCcuL3RyYW5zYWN0aW9uL2luaXRpYWxpc2UnKTtcclxuXHJcbmNvbnN0IHVwZGF0ZVRyYW5zYWN0aW9uSGFuZGxlciA9IGNyZWF0ZUhhbmRsZXIoVXBkYXRlVHJhbnNhY3Rpb24pLFxyXG4gICAgICBpbml0aWFsaXNlVHJhbnNhY3Rpb25IYW5kbGVyID0gY3JlYXRlSGFuZGxlcihJbml0aWFsaXNlVHJhbnNhY3Rpb24pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgdXBkYXRlVHJhbnNhY3Rpb25IYW5kbGVyLFxyXG4gIGluaXRpYWxpc2VUcmFuc2FjdGlvbkhhbmRsZXJcclxufTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUhhbmRsZXIoVHJhbnNhY3Rpb24pIHtcclxuICByZXR1cm4gZnVuY3Rpb24ocmVxdWVzdCwgcmVzcG9uc2UsIG5leHQpIHtcclxuICAgIGNvbnN0IHsgYm9keSB9ID0gcmVxdWVzdDtcclxuXHJcbiAgICBsZXQganNvbiA9IGJvZHk7ICAvLy9cclxuXHJcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IFRyYW5zYWN0aW9uLmZyb21KU09OKGpzb24pO1xyXG5cclxuICAgIGpzb24gPSB0cmFuc2FjdGlvbi50b0pTT04oKTtcclxuXHJcbiAgICBjb25zdCBzdGF0dXNDb2RlID0gMjAwLFxyXG4gICAgICAgICAgaGVhZGVycyA9IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyB9LFxyXG4gICAgICAgICAgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KGpzb24pO1xyXG5cclxuICAgIHJlc3BvbnNlLndyaXRlSGVhZChzdGF0dXNDb2RlLCBoZWFkZXJzKTtcclxuXHJcbiAgICByZXNwb25zZS53cml0ZShjb250ZW50KTtcclxuXHJcbiAgICByZXNwb25zZS5lbmQoKTtcclxuICB9O1xyXG59XHJcbiJdfQ==