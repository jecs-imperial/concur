'use strict';

require('juxtapose');

var easy = require('easy');

var Agent = require('./example/agent'),
    Document = require('./example/document'),
    EditableContentTextarea = require('./example/textarea/editableContent');

var Body = easy.Body;


var agent = Agent.fromNothing();

agent.initialise(function (content) {
  var body = new Body(),
      editableContent = content,
      ///
  editableContentTextarea = React.createElement(
    EditableContentTextarea,
    { onKeyUp: keyUpHandler },
    editableContent
  ),
      document = Document.fromEditableContentTextarea(editableContentTextarea);

  body.append(React.createElement(
    'section',
    null,
    React.createElement(
      'h1',
      null,
      'Concur example'
    ),
    editableContentTextarea
  ));

  function keyUpHandler() {
    var workingContent = document.getWorkingContent(),
        editableContent = document.getEditableContent();

    var success = agent.update(workingContent, editableContent, function (pendingOperations) {
      return document.update(pendingOperations);
    });

    if (success) {
      document.synchroniseWorkingContent();
    }
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9leGFtcGxlLmpzIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJlYXN5IiwiQWdlbnQiLCJEb2N1bWVudCIsIkVkaXRhYmxlQ29udGVudFRleHRhcmVhIiwiQm9keSIsImFnZW50IiwiZnJvbU5vdGhpbmciLCJpbml0aWFsaXNlIiwiY29udGVudCIsImJvZHkiLCJlZGl0YWJsZUNvbnRlbnQiLCJlZGl0YWJsZUNvbnRlbnRUZXh0YXJlYSIsImtleVVwSGFuZGxlciIsImRvY3VtZW50IiwiZnJvbUVkaXRhYmxlQ29udGVudFRleHRhcmVhIiwiYXBwZW5kIiwid29ya2luZ0NvbnRlbnQiLCJnZXRXb3JraW5nQ29udGVudCIsImdldEVkaXRhYmxlQ29udGVudCIsInN1Y2Nlc3MiLCJ1cGRhdGUiLCJwZW5kaW5nT3BlcmF0aW9ucyIsInN5bmNocm9uaXNlV29ya2luZ0NvbnRlbnQiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBQSxRQUFRLFdBQVI7O0FBRUEsSUFBTUMsT0FBT0QsUUFBUSxNQUFSLENBQWI7O0FBRUEsSUFBTUUsUUFBUUYsUUFBUSxpQkFBUixDQUFkO0FBQUEsSUFDTUcsV0FBV0gsUUFBUSxvQkFBUixDQURqQjtBQUFBLElBRU1JLDBCQUEwQkosUUFBUSxvQ0FBUixDQUZoQzs7SUFJUUssSSxHQUFTSixJLENBQVRJLEk7OztBQUVSLElBQU1DLFFBQVFKLE1BQU1LLFdBQU4sRUFBZDs7QUFFQUQsTUFBTUUsVUFBTixDQUFpQixVQUFTQyxPQUFULEVBQWtCO0FBQ2pDLE1BQU1DLE9BQU8sSUFBSUwsSUFBSixFQUFiO0FBQUEsTUFDTU0sa0JBQWtCRixPQUR4QjtBQUFBLE1BQ2tDO0FBQzVCRyw0QkFFRTtBQUFDLDJCQUFEO0FBQUEsTUFBeUIsU0FBU0MsWUFBbEM7QUFBaURGO0FBQWpELEdBSlI7QUFBQSxNQU9NRyxXQUFXWCxTQUFTWSwyQkFBVCxDQUFxQ0gsdUJBQXJDLENBUGpCOztBQVNBRixPQUFLTSxNQUFMLENBRUU7QUFBQTtBQUFBO0FBQ0U7QUFBQTtBQUFBO0FBQUE7QUFBQSxLQURGO0FBRUdKO0FBRkgsR0FGRjs7QUFTQSxXQUFTQyxZQUFULEdBQXdCO0FBQ3RCLFFBQU1JLGlCQUFpQkgsU0FBU0ksaUJBQVQsRUFBdkI7QUFBQSxRQUNNUCxrQkFBa0JHLFNBQVNLLGtCQUFULEVBRHhCOztBQUdBLFFBQU1DLFVBQVVkLE1BQU1lLE1BQU4sQ0FBYUosY0FBYixFQUE2Qk4sZUFBN0IsRUFBOEM7QUFBQSxhQUFxQkcsU0FBU08sTUFBVCxDQUFnQkMsaUJBQWhCLENBQXJCO0FBQUEsS0FBOUMsQ0FBaEI7O0FBRUEsUUFBSUYsT0FBSixFQUFhO0FBQ1hOLGVBQVNTLHlCQUFUO0FBQ0Q7QUFDRjtBQUNGLENBN0JEIiwiZmlsZSI6ImV4YW1wbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnJlcXVpcmUoJ2p1eHRhcG9zZScpO1xuXG5jb25zdCBlYXN5ID0gcmVxdWlyZSgnZWFzeScpO1xuXG5jb25zdCBBZ2VudCA9IHJlcXVpcmUoJy4vZXhhbXBsZS9hZ2VudCcpLFxuICAgICAgRG9jdW1lbnQgPSByZXF1aXJlKCcuL2V4YW1wbGUvZG9jdW1lbnQnKSxcbiAgICAgIEVkaXRhYmxlQ29udGVudFRleHRhcmVhID0gcmVxdWlyZSgnLi9leGFtcGxlL3RleHRhcmVhL2VkaXRhYmxlQ29udGVudCcpO1xuXG5jb25zdCB7IEJvZHkgfSA9IGVhc3k7XG5cbmNvbnN0IGFnZW50ID0gQWdlbnQuZnJvbU5vdGhpbmcoKTtcblxuYWdlbnQuaW5pdGlhbGlzZShmdW5jdGlvbihjb250ZW50KSB7XG4gIGNvbnN0IGJvZHkgPSBuZXcgQm9keSgpLFxuICAgICAgICBlZGl0YWJsZUNvbnRlbnQgPSBjb250ZW50LCAgLy8vXG4gICAgICAgIGVkaXRhYmxlQ29udGVudFRleHRhcmVhID1cblxuICAgICAgICAgIDxFZGl0YWJsZUNvbnRlbnRUZXh0YXJlYSBvbktleVVwPXtrZXlVcEhhbmRsZXJ9PntlZGl0YWJsZUNvbnRlbnR9PC9FZGl0YWJsZUNvbnRlbnRUZXh0YXJlYT5cblxuICAgICAgICAsXG4gICAgICAgIGRvY3VtZW50ID0gRG9jdW1lbnQuZnJvbUVkaXRhYmxlQ29udGVudFRleHRhcmVhKGVkaXRhYmxlQ29udGVudFRleHRhcmVhKTtcblxuICBib2R5LmFwcGVuZChcblxuICAgIDxzZWN0aW9uPlxuICAgICAgPGgxPkNvbmN1ciBleGFtcGxlPC9oMT5cbiAgICAgIHtlZGl0YWJsZUNvbnRlbnRUZXh0YXJlYX1cbiAgICA8L3NlY3Rpb24+XG5cbiAgKTtcblxuICBmdW5jdGlvbiBrZXlVcEhhbmRsZXIoKSB7XG4gICAgY29uc3Qgd29ya2luZ0NvbnRlbnQgPSBkb2N1bWVudC5nZXRXb3JraW5nQ29udGVudCgpLFxuICAgICAgICAgIGVkaXRhYmxlQ29udGVudCA9IGRvY3VtZW50LmdldEVkaXRhYmxlQ29udGVudCgpO1xuXG4gICAgY29uc3Qgc3VjY2VzcyA9IGFnZW50LnVwZGF0ZSh3b3JraW5nQ29udGVudCwgZWRpdGFibGVDb250ZW50LCBwZW5kaW5nT3BlcmF0aW9ucyA9PiBkb2N1bWVudC51cGRhdGUocGVuZGluZ09wZXJhdGlvbnMpKTtcblxuICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICBkb2N1bWVudC5zeW5jaHJvbmlzZVdvcmtpbmdDb250ZW50KCk7XG4gICAgfVxuICB9XG59KTtcbiJdfQ==