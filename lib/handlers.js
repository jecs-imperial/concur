"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initialiseTransactionHandler = exports.updateTransactionHandler = void 0;

var _update = _interopRequireDefault(require("./transaction/update"));

var _initialise = _interopRequireDefault(require("./transaction/initialise"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function createHandler(Transaction) {
  return function (request, response, next) {
    var body = request.body;
    var json = body; ///

    var transaction = Transaction.fromJSON(json);
    json = transaction.toJSON();
    var statusCode = 200,
        headers = {
      "Content-Type": "application/json; charset=utf-8"
    },
        content = JSON.stringify(json);
    response.writeHead(statusCode, headers);
    response.write(content);
    response.end();
  };
}

var updateTransactionHandler = createHandler(_update["default"]);
exports.updateTransactionHandler = updateTransactionHandler;
var initialiseTransactionHandler = createHandler(_initialise["default"]);
exports.initialiseTransactionHandler = initialiseTransactionHandler;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhhbmRsZXJzLmpzIl0sIm5hbWVzIjpbImNyZWF0ZUhhbmRsZXIiLCJUcmFuc2FjdGlvbiIsInJlcXVlc3QiLCJyZXNwb25zZSIsIm5leHQiLCJib2R5IiwianNvbiIsInRyYW5zYWN0aW9uIiwiZnJvbUpTT04iLCJ0b0pTT04iLCJzdGF0dXNDb2RlIiwiaGVhZGVycyIsImNvbnRlbnQiLCJKU09OIiwic3RyaW5naWZ5Iiwid3JpdGVIZWFkIiwid3JpdGUiLCJlbmQiLCJ1cGRhdGVUcmFuc2FjdGlvbkhhbmRsZXIiLCJVcGRhdGVUcmFuc2FjdGlvbiIsImluaXRpYWxpc2VUcmFuc2FjdGlvbkhhbmRsZXIiLCJJbml0aWFsaXNlVHJhbnNhY3Rpb24iXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FBRUE7O0FBQ0E7Ozs7QUFFQSxTQUFTQSxhQUFULENBQXVCQyxXQUF2QixFQUFvQztBQUNsQyxTQUFPLFVBQVNDLE9BQVQsRUFBa0JDLFFBQWxCLEVBQTRCQyxJQUE1QixFQUFrQztBQUFBLFFBQy9CQyxJQUQrQixHQUN0QkgsT0FEc0IsQ0FDL0JHLElBRCtCO0FBR3ZDLFFBQUlDLElBQUksR0FBR0QsSUFBWCxDQUh1QyxDQUdyQjs7QUFFbEIsUUFBTUUsV0FBVyxHQUFHTixXQUFXLENBQUNPLFFBQVosQ0FBcUJGLElBQXJCLENBQXBCO0FBRUFBLElBQUFBLElBQUksR0FBR0MsV0FBVyxDQUFDRSxNQUFaLEVBQVA7QUFFQSxRQUFNQyxVQUFVLEdBQUcsR0FBbkI7QUFBQSxRQUNNQyxPQUFPLEdBQUc7QUFBRSxzQkFBZ0I7QUFBbEIsS0FEaEI7QUFBQSxRQUVNQyxPQUFPLEdBQUdDLElBQUksQ0FBQ0MsU0FBTCxDQUFlUixJQUFmLENBRmhCO0FBSUFILElBQUFBLFFBQVEsQ0FBQ1ksU0FBVCxDQUFtQkwsVUFBbkIsRUFBK0JDLE9BQS9CO0FBRUFSLElBQUFBLFFBQVEsQ0FBQ2EsS0FBVCxDQUFlSixPQUFmO0FBRUFULElBQUFBLFFBQVEsQ0FBQ2MsR0FBVDtBQUNELEdBbEJEO0FBbUJEOztBQUVNLElBQU1DLHdCQUF3QixHQUFHbEIsYUFBYSxDQUFDbUIsa0JBQUQsQ0FBOUM7O0FBQ0EsSUFBTUMsNEJBQTRCLEdBQUdwQixhQUFhLENBQUNxQixzQkFBRCxDQUFsRCIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5cclxuaW1wb3J0IFVwZGF0ZVRyYW5zYWN0aW9uIGZyb20gXCIuL3RyYW5zYWN0aW9uL3VwZGF0ZVwiO1xyXG5pbXBvcnQgSW5pdGlhbGlzZVRyYW5zYWN0aW9uIGZyb20gXCIuL3RyYW5zYWN0aW9uL2luaXRpYWxpc2VcIjtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUhhbmRsZXIoVHJhbnNhY3Rpb24pIHtcclxuICByZXR1cm4gZnVuY3Rpb24ocmVxdWVzdCwgcmVzcG9uc2UsIG5leHQpIHtcclxuICAgIGNvbnN0IHsgYm9keSB9ID0gcmVxdWVzdDtcclxuXHJcbiAgICBsZXQganNvbiA9IGJvZHk7ICAvLy9cclxuXHJcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IFRyYW5zYWN0aW9uLmZyb21KU09OKGpzb24pO1xyXG5cclxuICAgIGpzb24gPSB0cmFuc2FjdGlvbi50b0pTT04oKTtcclxuXHJcbiAgICBjb25zdCBzdGF0dXNDb2RlID0gMjAwLFxyXG4gICAgICAgICAgaGVhZGVycyA9IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIgfSxcclxuICAgICAgICAgIGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShqc29uKTtcclxuXHJcbiAgICByZXNwb25zZS53cml0ZUhlYWQoc3RhdHVzQ29kZSwgaGVhZGVycyk7XHJcblxyXG4gICAgcmVzcG9uc2Uud3JpdGUoY29udGVudCk7XHJcblxyXG4gICAgcmVzcG9uc2UuZW5kKCk7XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHVwZGF0ZVRyYW5zYWN0aW9uSGFuZGxlciA9IGNyZWF0ZUhhbmRsZXIoVXBkYXRlVHJhbnNhY3Rpb24pO1xyXG5leHBvcnQgY29uc3QgaW5pdGlhbGlzZVRyYW5zYWN0aW9uSGFuZGxlciA9IGNyZWF0ZUhhbmRsZXIoSW5pdGlhbGlzZVRyYW5zYWN0aW9uKTtcclxuIl19