'use strict';

var UpdateTransaction = require('./transaction/update'),
    InitialiseTransaction = require('./transaction/initialise');

var updateTransactionHandler = createHandler(UpdateTransaction),
    initialiseTransactionHandler = createHandler(InitialiseTransaction);
module.exports = {
  updateTransactionHandler: updateTransactionHandler,
  initialiseTransactionHandler: initialiseTransactionHandler
};

function createHandler(Transaction) {
  return function (request, response, next) {
    var body = request.body;
    var json = body; ///

    var transaction = Transaction.fromJSON(json);
    json = transaction.toJSON();
    var statusCode = 200,
        headers = {
      'Content-Type': 'application/json; charset=utf-8'
    },
        content = JSON.stringify(json);
    response.writeHead(statusCode, headers);
    response.write(content);
    response.end();
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhhbmRsZXJzLmpzIl0sIm5hbWVzIjpbIlVwZGF0ZVRyYW5zYWN0aW9uIiwicmVxdWlyZSIsIkluaXRpYWxpc2VUcmFuc2FjdGlvbiIsInVwZGF0ZVRyYW5zYWN0aW9uSGFuZGxlciIsImNyZWF0ZUhhbmRsZXIiLCJpbml0aWFsaXNlVHJhbnNhY3Rpb25IYW5kbGVyIiwibW9kdWxlIiwiZXhwb3J0cyIsIlRyYW5zYWN0aW9uIiwicmVxdWVzdCIsInJlc3BvbnNlIiwibmV4dCIsImJvZHkiLCJqc29uIiwidHJhbnNhY3Rpb24iLCJmcm9tSlNPTiIsInRvSlNPTiIsInN0YXR1c0NvZGUiLCJoZWFkZXJzIiwiY29udGVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJ3cml0ZUhlYWQiLCJ3cml0ZSIsImVuZCJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsSUFBTUEsaUJBQWlCLEdBQUdDLE9BQU8sQ0FBQyxzQkFBRCxDQUFqQztBQUFBLElBQ01DLHFCQUFxQixHQUFHRCxPQUFPLENBQUMsMEJBQUQsQ0FEckM7O0FBR0EsSUFBTUUsd0JBQXdCLEdBQUdDLGFBQWEsQ0FBQ0osaUJBQUQsQ0FBOUM7QUFBQSxJQUNNSyw0QkFBNEIsR0FBR0QsYUFBYSxDQUFDRixxQkFBRCxDQURsRDtBQUdBSSxNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFDZkosRUFBQUEsd0JBQXdCLEVBQXhCQSx3QkFEZTtBQUVmRSxFQUFBQSw0QkFBNEIsRUFBNUJBO0FBRmUsQ0FBakI7O0FBS0EsU0FBU0QsYUFBVCxDQUF1QkksV0FBdkIsRUFBb0M7QUFDbEMsU0FBTyxVQUFTQyxPQUFULEVBQWtCQyxRQUFsQixFQUE0QkMsSUFBNUIsRUFBa0M7QUFBQSxRQUMvQkMsSUFEK0IsR0FDdEJILE9BRHNCLENBQy9CRyxJQUQrQjtBQUd2QyxRQUFJQyxJQUFJLEdBQUdELElBQVgsQ0FIdUMsQ0FHckI7O0FBRWxCLFFBQU1FLFdBQVcsR0FBR04sV0FBVyxDQUFDTyxRQUFaLENBQXFCRixJQUFyQixDQUFwQjtBQUVBQSxJQUFBQSxJQUFJLEdBQUdDLFdBQVcsQ0FBQ0UsTUFBWixFQUFQO0FBRUEsUUFBTUMsVUFBVSxHQUFHLEdBQW5CO0FBQUEsUUFDTUMsT0FBTyxHQUFHO0FBQUUsc0JBQWdCO0FBQWxCLEtBRGhCO0FBQUEsUUFFTUMsT0FBTyxHQUFHQyxJQUFJLENBQUNDLFNBQUwsQ0FBZVIsSUFBZixDQUZoQjtBQUlBSCxJQUFBQSxRQUFRLENBQUNZLFNBQVQsQ0FBbUJMLFVBQW5CLEVBQStCQyxPQUEvQjtBQUVBUixJQUFBQSxRQUFRLENBQUNhLEtBQVQsQ0FBZUosT0FBZjtBQUVBVCxJQUFBQSxRQUFRLENBQUNjLEdBQVQ7QUFDRCxHQWxCRDtBQW1CRCIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbmNvbnN0IFVwZGF0ZVRyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi90cmFuc2FjdGlvbi91cGRhdGUnKSxcclxuICAgICAgSW5pdGlhbGlzZVRyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi90cmFuc2FjdGlvbi9pbml0aWFsaXNlJyk7XHJcblxyXG5jb25zdCB1cGRhdGVUcmFuc2FjdGlvbkhhbmRsZXIgPSBjcmVhdGVIYW5kbGVyKFVwZGF0ZVRyYW5zYWN0aW9uKSxcclxuICAgICAgaW5pdGlhbGlzZVRyYW5zYWN0aW9uSGFuZGxlciA9IGNyZWF0ZUhhbmRsZXIoSW5pdGlhbGlzZVRyYW5zYWN0aW9uKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIHVwZGF0ZVRyYW5zYWN0aW9uSGFuZGxlcixcclxuICBpbml0aWFsaXNlVHJhbnNhY3Rpb25IYW5kbGVyXHJcbn07XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVIYW5kbGVyKFRyYW5zYWN0aW9uKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKHJlcXVlc3QsIHJlc3BvbnNlLCBuZXh0KSB7XHJcbiAgICBjb25zdCB7IGJvZHkgfSA9IHJlcXVlc3Q7XHJcblxyXG4gICAgbGV0IGpzb24gPSBib2R5OyAgLy8vXHJcblxyXG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBUcmFuc2FjdGlvbi5mcm9tSlNPTihqc29uKTtcclxuXHJcbiAgICBqc29uID0gdHJhbnNhY3Rpb24udG9KU09OKCk7XHJcblxyXG4gICAgY29uc3Qgc3RhdHVzQ29kZSA9IDIwMCxcclxuICAgICAgICAgIGhlYWRlcnMgPSB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcgfSxcclxuICAgICAgICAgIGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShqc29uKTtcclxuXHJcbiAgICByZXNwb25zZS53cml0ZUhlYWQoc3RhdHVzQ29kZSwgaGVhZGVycyk7XHJcblxyXG4gICAgcmVzcG9uc2Uud3JpdGUoY29udGVudCk7XHJcblxyXG4gICAgcmVzcG9uc2UuZW5kKCk7XHJcbiAgfTtcclxufVxyXG4iXX0=