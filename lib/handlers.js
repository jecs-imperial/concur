'use strict';

var UpdateTransaction = require('./transaction/update'),
    InitialiseTransaction = require('./transaction/initialise');

var updateTransactionHandler = createHandler(UpdateTransaction),
    initialiseTransactionHandler = createHandler(InitialiseTransaction);

module.exports = {
    updateTransactionHandler: updateTransactionHandler,
    initialiseTransactionHandler: initialiseTransactionHandler
};

function createHandler(Transaction) {
    return function (request, response, next) {
        var body = request.body;


        var json = body; ///

        var transaction = Transaction.fromJSON(json);

        json = transaction.toJSON();

        var statusCode = 200,
            headers = { 'Content-Type': 'application/json; charset=utf-8' },
            content = JSON.stringify(json);

        response.writeHead(statusCode, headers);

        response.write(content);

        response.end();
    };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9oYW5kbGVycy5qcyJdLCJuYW1lcyI6WyJVcGRhdGVUcmFuc2FjdGlvbiIsInJlcXVpcmUiLCJJbml0aWFsaXNlVHJhbnNhY3Rpb24iLCJ1cGRhdGVUcmFuc2FjdGlvbkhhbmRsZXIiLCJjcmVhdGVIYW5kbGVyIiwiaW5pdGlhbGlzZVRyYW5zYWN0aW9uSGFuZGxlciIsIm1vZHVsZSIsImV4cG9ydHMiLCJUcmFuc2FjdGlvbiIsInJlcXVlc3QiLCJyZXNwb25zZSIsIm5leHQiLCJib2R5IiwianNvbiIsInRyYW5zYWN0aW9uIiwiZnJvbUpTT04iLCJ0b0pTT04iLCJzdGF0dXNDb2RlIiwiaGVhZGVycyIsImNvbnRlbnQiLCJKU09OIiwic3RyaW5naWZ5Iiwid3JpdGVIZWFkIiwid3JpdGUiLCJlbmQiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLG9CQUFvQkMsUUFBUSxzQkFBUixDQUExQjtBQUFBLElBQ01DLHdCQUF3QkQsUUFBUSwwQkFBUixDQUQ5Qjs7QUFHQSxJQUFNRSwyQkFBMkJDLGNBQWNKLGlCQUFkLENBQWpDO0FBQUEsSUFDTUssK0JBQStCRCxjQUFjRixxQkFBZCxDQURyQzs7QUFHQUksT0FBT0MsT0FBUCxHQUFpQjtBQUNmSixzREFEZTtBQUVmRTtBQUZlLENBQWpCOztBQUtBLFNBQVNELGFBQVQsQ0FBdUJJLFdBQXZCLEVBQW9DO0FBQ2xDLFdBQU8sVUFBU0MsT0FBVCxFQUFrQkMsUUFBbEIsRUFBNEJDLElBQTVCLEVBQWtDO0FBQUEsWUFDL0JDLElBRCtCLEdBQ3RCSCxPQURzQixDQUMvQkcsSUFEK0I7OztBQUd2QyxZQUFJQyxPQUFPRCxJQUFYLENBSHVDLENBR3JCOztBQUVsQixZQUFNRSxjQUFjTixZQUFZTyxRQUFaLENBQXFCRixJQUFyQixDQUFwQjs7QUFFQUEsZUFBT0MsWUFBWUUsTUFBWixFQUFQOztBQUVBLFlBQU1DLGFBQWEsR0FBbkI7QUFBQSxZQUNNQyxVQUFVLEVBQUUsZ0JBQWdCLGlDQUFsQixFQURoQjtBQUFBLFlBRU1DLFVBQVVDLEtBQUtDLFNBQUwsQ0FBZVIsSUFBZixDQUZoQjs7QUFJQUgsaUJBQVNZLFNBQVQsQ0FBbUJMLFVBQW5CLEVBQStCQyxPQUEvQjs7QUFFQVIsaUJBQVNhLEtBQVQsQ0FBZUosT0FBZjs7QUFFQVQsaUJBQVNjLEdBQVQ7QUFDRCxLQWxCRDtBQW1CRCIsImZpbGUiOiJoYW5kbGVycy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbmNvbnN0IFVwZGF0ZVRyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi90cmFuc2FjdGlvbi91cGRhdGUnKSxcclxuICAgICAgSW5pdGlhbGlzZVRyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi90cmFuc2FjdGlvbi9pbml0aWFsaXNlJyk7XHJcblxyXG5jb25zdCB1cGRhdGVUcmFuc2FjdGlvbkhhbmRsZXIgPSBjcmVhdGVIYW5kbGVyKFVwZGF0ZVRyYW5zYWN0aW9uKSxcclxuICAgICAgaW5pdGlhbGlzZVRyYW5zYWN0aW9uSGFuZGxlciA9IGNyZWF0ZUhhbmRsZXIoSW5pdGlhbGlzZVRyYW5zYWN0aW9uKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIHVwZGF0ZVRyYW5zYWN0aW9uSGFuZGxlcixcclxuICBpbml0aWFsaXNlVHJhbnNhY3Rpb25IYW5kbGVyXHJcbn07XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVIYW5kbGVyKFRyYW5zYWN0aW9uKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKHJlcXVlc3QsIHJlc3BvbnNlLCBuZXh0KSB7XHJcbiAgICBjb25zdCB7IGJvZHkgfSA9IHJlcXVlc3Q7XHJcblxyXG4gICAgbGV0IGpzb24gPSBib2R5OyAgLy8vXHJcblxyXG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBUcmFuc2FjdGlvbi5mcm9tSlNPTihqc29uKTtcclxuXHJcbiAgICBqc29uID0gdHJhbnNhY3Rpb24udG9KU09OKCk7XHJcblxyXG4gICAgY29uc3Qgc3RhdHVzQ29kZSA9IDIwMCxcclxuICAgICAgICAgIGhlYWRlcnMgPSB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcgfSxcclxuICAgICAgICAgIGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShqc29uKTtcclxuXHJcbiAgICByZXNwb25zZS53cml0ZUhlYWQoc3RhdHVzQ29kZSwgaGVhZGVycyk7XHJcblxyXG4gICAgcmVzcG9uc2Uud3JpdGUoY29udGVudCk7XHJcblxyXG4gICAgcmVzcG9uc2UuZW5kKCk7XHJcbiAgfTtcclxufVxyXG4iXX0=